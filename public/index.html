<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<link rel="stylesheet" href="/main.css">
<!--<script type="text/javascript" src="https://cdn.plot.ly/plotly-basic-latest.min.js"></script>-->
<script src="https://unpkg.com/vue@next"></script>
<title>multy travian</title>
</head>
<body>
<div id="app"></div>
<form>
  <input name="coordinates" placeholder="(0|0)">
  <input name="time" placeholder="00:00:00">
  <button onclick="app.send('sendSupport', Object.fromEntries(new FormData(this.closest('form'))))">send</button>
  <div id="users"></div>
<form>
<div id="usersForm">
  <form>
    <label>userId<input type="text" name="userId" placeholder="userId"></label>
    <label>session<input type="text" name="session" placeholder="session"></label>
    <input type="button" value="add" onclick="app.send('addUser', Object.fromEntries(new FormData(this.closest('form'))))">
  <form>
</div>
<script src="/main.js"></script>
<script>
const vm = Vue.createApp({
  data: () => ({foo: 'foo'}),
  template: `<p>{{ foo }}</p><button @click="foo = 'baz'">Change it</button>`,
}).mount('#app')

//const lineDiv = document.getElementById('myChart')


/*
let chartData = new Map()

let chartData = [
  {
    x: [1, 2, 3, 4],
    y: [1, 40, 9, 60],
    type: 'scatter',
    name: 'qwe'
  },
  {
    x: [1, 2, 3, 4],
    y: [1, 20, 4, 22],
    type: 'scatter'
  }
]
 
let layout = {title:'A Line Chart in Plotly'}
 
Plotly.react( lineDiv, [...chartData.values()], layout ) */

  //const main = document.getElementById('main')

  //const ws = new WebSocket('ws://localhost:8082')

  /*ws.onmessage = ({data}) => {
    const result = JSON.parse(data)
    console.log(result)
    result.map(([chart, rank]) => {
      rank.map(({name, points, kingdomId}) => {
        if (!chartData.has(kingdomId)) {
          chartData.set(kingdomId, {x: [], y: [], type: 'scatter', name})
        }
        chartData.get(kingdomId).y.push(points)
        chartData.get(kingdomId).x.push(chartData.get(kingdomId).x.length)
      })
    })
    console.log([...chartData.values()])
    Plotly.react( lineDiv, [...chartData.values()], layout )
  }*/
</script>

</body>
</html>